<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cr√©er un CV - Current</title>
  <link rel="stylesheet" href="Input.css">
  <link rel="icon" href="Images/Logo.webp">
</head>
<body>

  <div class="border-box">
    <h1 class="title">Cr√©er votre CV</h1>
    <p class="subtitle">Remplissez les informations ci-dessous pour g√©n√©rer votre CV professionnel.</p>

    <form class="cv-form">
      
      <!-- Section 1: Informations personnelles -->
      <div class="form-section">
        <h3 class="section-title">Informations personnelles</h3>
        
        <div class="input-group">
          <input type="text" id="nom" name="nom" placeholder="Nom" pattern="[A-Za-z√Ä-√ø\s]+" title="Veuillez entrer uniquement des lettres" required>
          <input type="text" id="prenom" name="prenom" placeholder="Pr√©nom" pattern="[A-Za-z√Ä-√ø\s]+" title="Veuillez entrer uniquement des lettres" required>
        </div>
        
        <input type="email" id="email" name="email" placeholder="Adresse e-mail" required>
        
        <input type="tel" id="telephone" name="telephone" placeholder="Num√©ro de t√©l√©phone" pattern="[0-9]{10}" maxlength="10" title="Veuillez entrer exactement 10 chiffres" required>
        
        <input type="text" id="ville" name="ville" placeholder="Adresse / Ville" pattern="[A-Za-z√Ä-√ø\s]+" title="Veuillez entrer uniquement des lettres" required>
        
        <!-- Date de naissance -->
        <label class="form-label">Date de naissance</label>
        <div class="input-group input-group-3">
          <select id="day" name="day" required>
            <option value="">Jour</option>
            <option value="01">01</option>
            <option value="02">02</option>
            <option value="03">03</option>
            <option value="04">04</option>
            <option value="05">05</option>
            <option value="06">06</option>
            <option value="07">07</option>
            <option value="08">08</option>
            <option value="09">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
          </select>

          <select id="month" name="month" required>
            <option value="">Mois</option>
            <option value="01">Janvier</option>
            <option value="02">F√©vrier</option>
            <option value="03">Mars</option>
            <option value="04">Avril</option>
            <option value="05">Mai</option>
            <option value="06">Juin</option>
            <option value="07">Juillet</option>
            <option value="08">Ao√ªt</option>
            <option value="09">Septembre</option>
            <option value="10">Octobre</option>
            <option value="11">Novembre</option>
            <option value="12">D√©cembre</option>
          </select>

          <select id="year" name="year" required>
            <option value="">Ann√©e</option>
            <option value="2010">2010</option>
            <option value="2009">2009</option>
            <option value="2008">2008</option>
            <option value="2007">2007</option>
            <option value="2006">2006</option>
            <option value="2005">2005</option>
            <option value="2004">2004</option>
            <option value="2003">2003</option>
            <option value="2002">2002</option>
            <option value="2001">2001</option>
            <option value="2000">2000</option>
            <option value="1999">1999</option>
            <option value="1998">1998</option>
            <option value="1997">1997</option>
            <option value="1996">1996</option>
            <option value="1995">1995</option>
            <option value="1994">1994</option>
            <option value="1993">1993</option>
            <option value="1992">1992</option>
            <option value="1991">1991</option>
            <option value="1990">1990</option>
            <option value="1989">1989</option>
            <option value="1988">1988</option>
            <option value="1987">1987</option>
            <option value="1986">1986</option>
            <option value="1985">1985</option>
            <option value="1984">1984</option>
            <option value="1983">1983</option>
            <option value="1982">1982</option>
            <option value="1981">1981</option>
            <option value="1980">1980</option>
          </select>
        </div>
        
        <textarea id="resume" name="resume" placeholder="R√©sum√© ou description personnelle" rows="4" required></textarea>
        
        <!-- Upload Photo -->
        <div class="file-input-container">
          <input type="file" id="file" name="photo" accept="image/png, image/jpeg">
          <label for="file" class="file-label">
            <span class="file-icon">üìÅ</span>
            Choisir une photo
          </label>
          <span class="file-name" id="fileName">Aucun fichier</span>
        </div>
        <div class="image-preview" id="imagePreview"></div>
      </div>

      <!-- Section 2: Formation -->
      <div class="form-section">
        <h3 class="section-title">Formation</h3>
        
        <div id="formations-container">
          <!-- Formation 1 (default) -->
          <div class="formation-item">
            <label class="form-label">Dipl√¥me</label>
            <input type="text" name="diplome[]" placeholder="Ex: Licence en Informatique">
            
            <label class="form-label">√âtablissement</label>
            <input type="text" name="etablissement[]" placeholder="Ex: Universit√© Mohammed V">
            
            <div class="input-group">
              <div>
                <label class="form-label">Ann√©e de d√©but</label>
                <input type="text" name="formation_debut[]" placeholder="Ex: 2020">
              </div>
              <div>
                <label class="form-label">Ann√©e de fin</label>
                <input type="text" name="formation_fin[]" placeholder="Ex: 2023">
              </div>
            </div>
            
            <label class="form-label">Description</label>
            <textarea name="formation_desc[]" placeholder="Description de la formation" rows="3"></textarea>
          </div>
        </div>
        
        <!-- Bouton Ajouter Formation -->
        <button type="button" class="btn-add" id="add-formation">
          <span>+</span> Ajouter une formation
        </button>
      </div>

      <!-- Section 3: Exp√©rience professionnelle -->
      <div class="form-section">
        <h3 class="section-title">Exp√©rience professionnelle</h3>
        
        <div id="experiences-container">
          <!-- Exp√©rience 1 (default) -->
          <div class="experience-item">
            <label class="form-label">Poste occup√©</label>
            <input type="text" name="poste[]" placeholder="Ex: D√©veloppeur Web">
            
            <label class="form-label">Entreprise</label>
            <input type="text" name="entreprise[]" placeholder="Ex: Google Morocco">
            
            <div class="input-group">
              <div>
                <label class="form-label">Date de d√©but</label>
                <input type="text" name="exp_debut[]" placeholder="Ex: Janvier 2022">
              </div>
              <div>
                <label class="form-label">Date de fin</label>
                <input type="text" name="exp_fin[]" placeholder="Ex: Pr√©sent">
              </div>
            </div>
            
            <label class="form-label">Description des missions</label>
            <textarea name="exp_desc[]" placeholder="D√©crivez vos missions et responsabilit√©s" rows="4"></textarea>
          </div>
        </div>
        
        <!-- Bouton Ajouter Exp√©rience -->
        <button type="button" class="btn-add" id="add-experience">
          <span>+</span> Ajouter une exp√©rience
        </button>
      </div>

      <!-- Section 4: Comp√©tences techniques -->
      <div class="form-section">
        <h3 class="section-title">Comp√©tences techniques</h3>
        <textarea id="competences" name="competences" placeholder="Listez vos comp√©tences techniques (ex: HTML, CSS, JavaScript, Python...)" rows="4"></textarea>
      </div>

      <!-- Section 5: Soft Skills -->
      <div class="form-section">
        <h3 class="section-title">Soft Skills</h3>
        <textarea id="soft_skills" name="soft_skills" placeholder="Listez vos soft skills (ex: Communication, Travail d'√©quipe, Gestion du temps...)" rows="4"></textarea>
      </div>

      <!-- Section 6: Langues -->
      <div class="form-section">
        <h3 class="section-title">Langues</h3>
        <div class="input-group">
          <input type="text" id="langue1" name="langue1" placeholder="Langue (ex: Fran√ßais)">
          <select id="niveau1" name="niveau1">
            <option value="">Niveau</option>
            <option value="debutant">D√©butant</option>
            <option value="intermediaire">Interm√©diaire</option>
            <option value="avance">Avanc√©</option>
            <option value="courant">Courant</option>
            <option value="natif">Natif</option>
          </select>
        </div>
        <div class="input-group">
          <input type="text" id="langue2" name="langue2" placeholder="Langue (ex: Anglais)">
          <select id="niveau2" name="niveau2">
            <option value="">Niveau</option>
            <option value="debutant">D√©butant</option>
            <option value="intermediaire">Interm√©diaire</option>
            <option value="avance">Avanc√©</option>
            <option value="courant">Courant</option>
            <option value="natif">Natif</option>
          </select>
        </div>
      </div>

      <!-- Section Choix de Template -->
<div class="form-section">
  <h3 class="section-title">Choix du Template</h3>
  <p style="font-size: 14px; color: rgba(255,255,255,0.8); margin-bottom: 15px;">
    S√©lectionnez le mod√®le de CV que vous pr√©f√©rez
  </p>
  
  <div class="template-choice">
    <label class="template-option">
      <input type="radio" name="template" value="template1" required checked>
      <div class="template-card">
        <div class="template-preview template1-preview">
          <div class="preview-header"></div>
          <div class="preview-line"></div>
          <div class="preview-line short"></div>
          <div class="preview-section"></div>
        </div>
        <h4>Template 1</h4>
        <p>Design classique et professionnel</p>
      </div>
    </label>
    
    <label class="template-option">
      <input type="radio" name="template" value="template2" required>
      <div class="template-card">
        <div class="template-preview template2-preview">
          <div class="preview-sidebar"></div>
          <div class="preview-content">
            <div class="preview-line"></div>
            <div class="preview-line short"></div>
          </div>
        </div>
        <h4>Template 2</h4>
        <p>Design moderne avec sidebar</p>
      </div>
    </label>
  </div>
</div>

      <!-- Boutons -->
      <div class="buttons">
        <button class="btn" type="submit">G√©n√©rer le CV</button>
        <button class="btn secondary" type="button" id="btn-accueil">Retour √† l'accueil</button>
      </div>
    </form>
  </div>

<script>
    // Bouton retour
    document.getElementById("btn-accueil").addEventListener("click", function() {
      window.location.href = "Home.html";
    });

    // Upload image preview
    const fileInput = document.getElementById('file');
    const fileName = document.getElementById('fileName');
    const imagePreview = document.getElementById('imagePreview');

    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      
      if (file) {
        fileName.textContent = file.name;
        
        const reader = new FileReader();
        reader.onload = function(event) {
          imagePreview.innerHTML = `<img src="${event.target.result}" alt="Preview">`;
          // Save image f localStorage
          localStorage.setItem('cvPhoto', event.target.result);
        };
        reader.readAsDataURL(file);
      } else {
        fileName.textContent = 'Aucun fichier';
        imagePreview.innerHTML = '';
      }
    });
  
    // Ajouter Formation
    let formationCount = 1;
    document.getElementById('add-formation').addEventListener('click', function() {
      formationCount++;
      
      const formationHTML = `
        <div class="formation-item">
          <button type="button" class="btn-remove" onclick="this.parentElement.remove()">√ó</button>
          
          <label class="form-label">Dipl√¥me</label>
          <input type="text" name="diplome[]" placeholder="Ex: Licence en Informatique">
          
          <label class="form-label">√âtablissement</label>
          <input type="text" name="etablissement[]" placeholder="Ex: Universit√© Mohammed V">
          
          <div class="input-group">
            <div>
              <label class="form-label">Ann√©e de d√©but</label>
              <input type="text" name="formation_debut[]" placeholder="Ex: 2020">
            </div>
            <div>
              <label class="form-label">Ann√©e de fin</label>
              <input type="text" name="formation_fin[]" placeholder="Ex: 2023">
            </div>
          </div>
          
          <label class="form-label">Description</label>
          <textarea name="formation_desc[]" placeholder="Description de la formation" rows="3"></textarea>
        </div>
      `;
      
      document.getElementById('formations-container').insertAdjacentHTML('beforeend', formationHTML);
    });

    // Ajouter Exp√©rience professionnelle
    let experienceCount = 1;
    document.getElementById('add-experience').addEventListener('click', function() {
      experienceCount++;
      
      const experienceHTML = `
        <div class="experience-item">
          <button type="button" class="btn-remove" onclick="this.parentElement.remove()">√ó</button>
          
          <label class="form-label">Poste occup√©</label>
          <input type="text" name="poste[]" placeholder="Ex: D√©veloppeur Web">
          
          <label class="form-label">Entreprise</label>
          <input type="text" name="entreprise[]" placeholder="Ex: Google Morocco">
          
          <div class="input-group">
            <div>
              <label class="form-label">Date de d√©but</label>
              <input type="text" name="exp_debut[]" placeholder="Ex: Janvier 2022">
            </div>
            <div>
              <label class="form-label">Date de fin</label>
              <input type="text" name="exp_fin[]" placeholder="Ex: Pr√©sent">
            </div>
          </div>
          
          <label class="form-label">Description des missions</label>
          <textarea name="exp_desc[]" placeholder="D√©crivez vos missions et responsabilit√©s" rows="4"></textarea>
        </div>
      `;
      
      document.getElementById('experiences-container').insertAdjacentHTML('beforeend', experienceHTML);
    });

    // Form submission - Redirect 7asb template
    const form = document.querySelector('.cv-form');
    
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Jme3 data mn form
      const formData = new FormData(form);
      const data = {};
      
      for (let [key, value] of formData.entries()) {
        if (data[key]) {
          // Ila key deja kayn (arrays like diplome[]), dir array
          if (!Array.isArray(data[key])) {
            data[key] = [data[key]];
          }
          data[key].push(value);
        } else {
          data[key] = value;
        }
      }
      
      // Save data f localStorage
      localStorage.setItem('cvData', JSON.stringify(data));
      
      // Redirect 7asb template
      const selectedTemplate = document.querySelector('input[name="template"]:checked');
      
      if (!selectedTemplate) {
        alert('Veuillez s√©lectionner un template');
        return;
      }
      
      if (selectedTemplate.value === 'template1') {
        window.location.href = 'CV1.html';
      } else if (selectedTemplate.value === 'template2') {
        window.location.href = 'CV2.html';
      }
    });
</script>

</body>
</html>